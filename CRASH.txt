When I click the Record button:

Building Did You Get It app in debug mode...
Building for debugging...
/Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/DidYouGet/DidYouGet/Models/RecordingManager.swift:377:13: warning: no calls to throwing functions occur within 'try' expression
375 |             
376 |             // Start asset writers
377 |             try videoAssetWriter!.startWriting()
    |             `- warning: no calls to throwing functions occur within 'try' expression
378 |             
379 |             if let audioAssetWriter = audioAssetWriter {

/Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/DidYouGet/DidYouGet/Models/RecordingManager.swift:380:17: warning: no calls to throwing functions occur within 'try' expression
378 |             
379 |             if let audioAssetWriter = audioAssetWriter {
380 |                 try audioAssetWriter.startWriting()
    |                 `- warning: no calls to throwing functions occur within 'try' expression
381 |             }
382 |             

/Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/DidYouGet/DidYouGet/Models/RecordingManager.swift:458:11: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
456 |                 videoInput.append(sampleBuffer)
457 |             }
458 |         } catch {
    |           `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
459 |             print("Error appending video sample buffer: \(error)")
460 |         }

/Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/DidYouGet/DidYouGet/Models/RecordingManager.swift:482:11: warning: 'catch' block is unreachable because no errors are thrown in 'do' block
480 |                 audioInput.append(sampleBuffer)
481 |             }
482 |         } catch {
    |           `- warning: 'catch' block is unreachable because no errors are thrown in 'do' block
483 |             print("Error appending audio sample buffer: \(error)")
484 |         }
[9/9] Applying DidYouGet
Build complete! (4.52s)
Build successful!
Running application from: /Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/.build/x86_64-apple-macosx/debug/DidYouGet

ðŸ’£ Program crashed: Bad pointer dereference at 0x0000000000000000

Thread 2 crashed:

 0 0x00007ff81fc88ff0 _Unwind_RaiseException + 240 in libunwind.dylib
 1 0x00007ff811762234 __cxa_throw + 61 in libc++abi.dylib
 2 0x00007ff8113cc34a objc_exception_throw + 317 in libobjc.A.dylib
 3 0x00007ff829a2bc8b -[AVAssetWriterInput appendSampleBuffer:] + 605 in AVFCore
 4 RecordingManager.processSampleBuffer(_:) + 526 in DidYouGet at /Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/DidYouGet/DidYouGet/Models/RecordingManager.swift:456:28

   454â”‚         do {
   455â”‚             if CMSampleBufferDataIsReady(sampleBuffer) {
   456â”‚                 videoInput.append(sampleBuffer)                                                                    
      â”‚                            â–²
   457â”‚             }
   458â”‚         } catch {

 5 closure #1 in RecordingManager.startCapture() + 213 in DidYouGet at /Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/DidYouGet/DidYouGet/Models/RecordingManager.swift:413:22

   411â”‚             switch type {
   412â”‚             case .screen:
   413â”‚                 self.processSampleBuffer(sampleBuffer)                                                             
      â”‚                      â–²
   414â”‚             case .audio:
   415â”‚                 self.processAudioSampleBuffer(sampleBuffer)

 6 RecordingManager.SCStreamFrameOutput.stream(_:didOutputSampleBuffer:of:) + 149 in DidYouGet at /Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/DidYouGet/DidYouGet/Models/RecordingManager.swift:58:17

    56â”‚             switch type {
    57â”‚             case .screen:
    58â”‚                 handler(sampleBuffer, .screen)                                                                     
      â”‚                 â–²
    59â”‚             case .audio:
    60â”‚                 handler(sampleBuffer, .audio)

 7 0x00007ffb1f80b751 __59-[SCStream(SCContentSharing) startRemoteVideoReceiveQueue:]_block_invoke + 2839 in ScreenCaptureKit
 8 0x00007ff911ee4c42 __FigRemoteOperationReceiverCreateMessageReceiver_block_invoke + 73 in CMCapture
 9 0x00007ff91207011d __rqReceiverSetSource_block_invoke + 219 in CMCapture
10 0x00007ff8116149fc _dispatch_client_callout + 6 in libdispatch.dylib
11 0x00007ff8116020c3 _dispatch_continuation_pop + 518 in libdispatch.dylib
12 0x00007ff8116117fa _dispatch_source_invoke + 2207 in libdispatch.dylib
13 0x00007ff81160e89a _dispatch_root_queue_drain_deferred_item + 140 in libdispatch.dylib
14 0x00007ff81160e1b3 _dispatch_kevent_worker_thread + 594 in libdispatch.dylib
15 0x00007ff8117a68ed _pthread_wqthread + 362 in libsystem_pthread.dylib
16 0x00007ff8117a5843 start_wqthread + 15 in libsystem_pthread.dylib

Backtrace took 4.45s

Press any key once LLDB is attached, or A to abort                                       



Last login: Tue May 20 01:34:01 on ttys006
You have mail.
/tmp/backtrace.Lqc3qH8w/lldb.command ; exit;
~
[01:46:38] $ /tmp/backtrace.Lqc3qH8w/lldb.command ; exit;



















Once LLDB has attached, return to the other window and press any key

(lldb) process attach --pid 1013
Process 1013 stopped
* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP
    frame #0: 0x00007ff811767b4a libsystem_kernel.dylib`mach_msg2_trap + 10
libsystem_kernel.dylib`mach_msg2_trap:
->  0x7ff811767b4a <+10>: retq   
    0x7ff811767b4b <+11>: nop    

libsystem_kernel.dylib`macx_swapon:
    0x7ff811767b4c <+0>:  movq   %rcx, %r10
    0x7ff811767b4f <+3>:  movl   $0x1000030, %eax ; imm = 0x1000030 
Target 0: (DidYouGet) stopped.
Executable binary set to "/Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/.build/x86_64-apple-macosx/debug/DidYouGet".
Architecture set to: x86_64-apple-macosx-.
(lldb) c






Last login: Tue May 20 01:34:01 on ttys006
You have mail.
/tmp/backtrace.Lqc3qH8w/lldb.command ; exit;
~
[01:46:38] $ /tmp/backtrace.Lqc3qH8w/lldb.command ; exit;



















Once LLDB has attached, return to the other window and press any key

(lldb) process attach --pid 1013
Process 1013 stopped
* thread #1, queue = 'com.apple.main-thread', stop reason = signal SIGSTOP
    frame #0: 0x00007ff811767b4a libsystem_kernel.dylib`mach_msg2_trap + 10
libsystem_kernel.dylib`mach_msg2_trap:
->  0x7ff811767b4a <+10>: retq   
    0x7ff811767b4b <+11>: nop    

libsystem_kernel.dylib`macx_swapon:
    0x7ff811767b4c <+0>:  movq   %rcx, %r10
    0x7ff811767b4f <+3>:  movl   $0x1000030, %eax ; imm = 0x1000030 
Target 0: (DidYouGet) stopped.
Executable binary set to "/Users/adam/Developer/vcs/github.twardoch/pub/didyouget.it/.build/x86_64-apple-macosx/debug/DidYouGet".
Architecture set to: x86_64-apple-macosx-.
(lldb) c

Process 1013 resuming
Process 1013 stopped
* thread #3, queue = 'com.apple.root.default-qos', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)
    frame #0: 0x00007ff81fc88ff0 libunwind.dylib`_Unwind_RaiseException + 240
libunwind.dylib`_Unwind_RaiseException:
->  0x7ff81fc88ff0 <+240>: callq  *%rax
    0x7ff81fc88ff2 <+242>: cmpl   $0x8, %eax
    0x7ff81fc88ff5 <+245>: je     0x7ff81fc88fa0 ; <+160>
    0x7ff81fc88ff7 <+247>: cmpl   $0x6, %eax
Target 0: (DidYouGet) stopped.
(lldb) 
Process 1013 resuming
Process 1013 stopped
* thread #3, queue = 'com.apple.root.default-qos', stop reason = EXC_BAD_ACCESS (code=EXC_I386_GPFLT)
    frame #0: 0x00007ff81fc88ff0 libunwind.dylib`_Unwind_RaiseException + 240
libunwind.dylib`_Unwind_RaiseException:
->  0x7ff81fc88ff0 <+240>: callq  *%rax
    0x7ff81fc88ff2 <+242>: cmpl   $0x8, %eax
    0x7ff81fc88ff5 <+245>: je     0x7ff81fc88fa0 ; <+160>
    0x7ff81fc88ff7 <+247>: cmpl   $0x6, %eax
Target 0: (DidYouGet) stopped.
(lldb)  

